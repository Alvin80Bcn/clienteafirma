<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Pruebas AutoFirma</title>
        <script type="text/javascript" src="constantes.js"></script>
		<script type="text/javascript" src="miniapplet.js"></script>
		
		<script type="text/javascript">
		
			function doSign() {
			
				var dataB64 = MiniApplet.getBase64FromText("Hola Mundo!!");
				MiniApplet.sign(dataB64, "SHA1withRSA", "CAdES", null, successCallback, errorCallback);
			}
		
			function successCallback(signatureB64, certB64) {
				alert("¡¡EXITO!!");
			}
			
			function errorCallback(signatureB64, certB64) {
				alert("¡¡ERROR!!");
			}
		
		</script>
    </head>

    <body>
	
        <div>
		
			<input type="button" value="Firmar" onclick="doSign();">&nbsp;
			
        </div>
		
		<script type="text/javascript">
		
			//MiniApplet.setForceWSMode(true);
			//MiniApplet.setForceAFirma(true);
			MiniApplet.setJnlpService(Constants.URL_BASE_SERVICES + "/afirma-server-simpleafirma-webstart/autofirmajnlp");
			MiniApplet.setServlets(Constants.URL_BASE_SERVICES + "/afirma-signature-storage/StorageService",
					Constants.URL_BASE_SERVICES + "/afirma-signature-retriever/RetrieveService");
			MiniApplet.cargarAppAfirma(Constants.URL_BASE_APPLET);
		</script>
    </body>

</html>
